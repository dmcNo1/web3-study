### 什么是比特币中的 P2P 网络技术？
比特币技术的核心组成部分之一，所有节点既能作为服务端也能作为客户端，因此P2P网络不需要依赖中心化机构，实现了比特币的去中心化。每一个网络节点都能保存一份完整的交易记录，并且参与网络的管理，全网共同维护一份账本，保证数据的一致性。

### 区块链在比特币中起什么作用？
比特币的交易，通过分布式账本的形式存储在区块链网络中。

### 比特币如何使用工作量证明机制？
PoW。

什么是PoW？比特币中，新的区块的构建以及将区块加入到区块链上，是由矿工负责的。想要成为矿工，需要破解复杂的计算题，第一个破解出来的矿工才有资格打包区块，也就是挖矿。相应的，负责打包的矿工将会获取挖矿奖励，以及这个区块上交易的手续费。为了保证区块的生成速率，这个计算的难度会随着时间自动调整。

这种机制下，区块链的维护不再需要依赖中心机构，而是由所有的参与方来一同维护区块链网络，这实现了比特币的去中心化。计算的复杂度，从经济学的角度上保证了区块链的安全性和一致性。

### 最长链原则是如何在比特币中应用的？
如果多个矿工，同时获得了打包的权利，那么这时候区块链就会产生分叉，这几个分叉节点只有一个是有效的，处在最长的链上的节点就是那个有效节点，这也避免了双花问题，解决了一致性和安全性的问题。

### 比特币系统中的分叉是如何发生的？
比特币从创建到现在已经经过了很多年了，期间，很多参与者认为比特币的交易速度过慢，就想对比特币系统进行升级，升级导致前后节点不同，而产生了分叉。分叉可以分为硬分叉和软分叉。

硬分叉：升级之后，新的节点可以认可旧的节点，但是旧的节点不认可新节点。由于新旧节点不认可，主链就会产生分叉，产生第二条链。

软分叉：新旧节点兼容，所以不会产生第二条链。

### 硬分叉与软分叉有何区别？
旧的区块是否认同新的区块，从而导致第二条链的产生。

### 什么是比特币的 Coinbase 交易？
每一个区块体的第一笔交易。这个交易没有输入，或者输入是Coinbase，输出是矿工的地址，代表了给矿工的挖矿奖励和手续费。

### UTXO 模型是什么？
未花费的交易输出。

区块上的每一笔交易都由n(n≥0)条输入和m(m≥1)条输出组成。在这种模型中，不能拆分花费，只能合并花费；例如，A想要转账6比特币给B，那么A必须找到一条输出为A，且数量大于6数据作为输入，或者是合并多个数据，以保证输入大于等于6。

+ 输入：转出方的地址，以及转出方转出的数量
+ 输出：转入方的地址，以及转入给转入方的数量
+ 输入数量=输出数量

### 比特币如何解决双花问题？
**UTXO、区块时间戳、6 次确认、分叉及最长链原则**

1. 矿工在挖矿时，会统计一个地址的UTXO记录，计算出该地址可花费数量。当发生了一次双花请求时，矿工会根据自己的排序规则选取交易，第一笔花费会被记录到块上，而第二笔由于剩余输出数量不足，被视为失败的交易，不会被记录到区块上。
2. 当矿工将区块记录到区块链上的时候，会区块上就会携带这条输出的时间戳，后续的操作会校验这个时间戳，相同时间戳的交易也会被视为失败的。
3. 在比特币中，随着时间的推移，篡改数据的难度会越来越大，每一次在这个区块之后创建新的区块，就相当于对这个区块的认可。一般在这个区块创建之后，再创建了5个区块后，就认为这个交易是成功有效的。所以一般比特币交易的确认时间为一小时。
4. 在挖矿的过程中，可能会有多个矿工同时获得打包区块的权利，这时候就会产生分叉，多个分叉上的交易可能是不一样的。为了解决这个问题，比特币账本以最长的链为准。

### 什么是比特币的工作量证明（PoW）机制？
什么是PoW？比特币中，新的区块的构建以及将区块加入到区块链上，是由矿工负责的。想要成为矿工，需要破解复杂的计算题，第一个破解出来的矿工才有资格打包区块，也就是挖矿。相应的，负责打包的矿工将会获取挖矿奖励，以及这个区块上交易的手续费。为了保证区块的生成速率，这个计算的难度会随着时间自动调整。比特币通过这种机制来保证安全性和一致性。

### 比特币地址是如何生成的？
早期的比特币直接使用公钥作为地址，后来被证实存在安全隐患，改为通过加密公钥生成地址。

### 隔离见证（SegWit）是什么，它如何工作？
1. 隔离见证是一种改变区块数据结构的软升级方案，不会产生硬分叉。目的是提高比特币区块的容量，从而提高吞吐量
2. 将区块中的签名信息从区块中隔离出来，从而保证不会因为签名信息而影响加密结果

### 比特币挖矿是如何进行的？
1. 矿工先从全网的交易中，根据自己的规则排序，选取交易。然后计算这些交易的手续费，以及挖矿奖励，计算出coinbase，coinbase+交易，生成区块体
2. 计算区块的Merkle Root，填充区块头字段
3. 不断生成随机数Nonce，然后计算出区块的Hash值，并且比对结果是否符合要求
4. 一旦结果符合要求，就会全网广播，将区块加入到区块链上

### 比特币网络是如何保护用户隐私的？
每一个交易的参与方在比特币网络上都不使用真实的信息，而是使用公钥生成的地址来进行交易

### 比特币的难度调整是如何工作的？
每2016个区块（实际是2015个），都会统计一次这2016个区块的平均打包时间，然后调整计算难度，以保证每个矿工打包的时间间隔在10min。

