# 什么是区块？包含了哪些数据？
## 什么是区块？
区块是组成区块链的基本单位

## 包含了哪些数据？
一个区块一般包含区块头和区块体两个部分

**区块头**

1. 当前区块生成的时间戳
2. 前一个区块的HashCode
3. 区块的版本号
4. 随机数（Nonce），用于工作量证明(PoW)，矿工需要调整这个值来满足挖矿难度的要求
5. 默克尔根（Merkle Root），当前区块的Hash摘要，用于快速验证
6. 难度值，当前网络的哈希计算难度，控制区块生成速度（如比特币约10分钟/区块）。

**区块体**

1. **交易列表，**包含本区块打包的所有交易（如转账、智能合约调用）。比特币每个区块约容纳2000-3000笔交易。
2. 其他数据，可能包括矿工留言（Coinbase交易）、智能合约日志（以太坊）、治理提案等附加信息。

# 什么是交易？交易执行之后产生什么样的影响？
在以太坊中，交易代表了一个数据包，包含了用户发起的一次操作，可以是转账、合约调用或者合约的部署。

交易中包含的一些重要信息：
1. 发送者
2. 接收者。如果接收者为某一个账户，那就是一个地址；如果是一个合约账户，表示调用了合约中的某个函数
3. Value，转账的数量，单位是Wei
4. Data。如果是转账的话，那么这个字段可以为空，或者是交易的附带消息；如果是调用合约的话，Data就包含了调用的函数签名和参数
5. GasLimit，最大的Gas费用上线
6. GasPrice，每单位Gas的ETH价格，一般价格越高，交易的优先级就越高
7. Nonce，交易计数器，目的是防止重复交易攻击

## 交易执行之后产生什么样的影响？
1. 账户余额会发生变化
   * 转出方余额减少（转账金额，消耗的Gas费用）
   * 转入方余额增加（转账的金额）
   * 矿工获取到Gas费用奖励
2. 交易执行之后，这个交易就会被永久的记录到区块中，不可被删除和篡改
3. 触发了合约事件后，日志就会记录在交易收据中，可以被链下程序监听
4. 交易的Nonce值递增，防止重复交易攻击
5. 交易完成之后还会创建收据receipt

# 什么是合约？怎么调用合约？调用合约之后怎么查询合约中的数据？
## 什么是合约？
合约是部署在以太坊上的一段代码块，一旦部署在链上，就不可被修改。

智能合约有这几个特点：
1. 自动执行，不需要第三方干预，满足条件即可触发
2. 不可篡改
3. 代码和交易记录在链上都是公开的

典型应用
* 代币发行（如 ERC20、ERC721）。
* 去中心化金融（DeFi）（如 Uniswap 的兑换逻辑）。
* 投票系统、供应链追踪等。

## 怎么调用合约？
合约不会自己执行，只能通过外部账户调用或者是其他的合约账户调用。

1. 可以通过钱包手动调用合约
2. 通过程序代码调用，比如geth
3. 通过区块链浏览器直接调用，这种方式只能调用只读接口

## 如何查询？
1. 代码，geth，根据合约的地址查询，或者根据交易的hash查询
2. 区块链浏览器
3. 监听合约事件
4. 使用子图查询链上数据

# 交易的Receipt包含哪些数据？
交易回执，在以太坊上，交易被矿工打包后生成的结果，包含了交易执行的相关信息。包含这些内容：
1. Status，0或1，表示交易是否成功
2. TransactionHash，交易的hash
3. BlockHash，交易所在区块的hash
4. BlockNumber，交易所在区块编号
5. GasUsed，花费的gas
6. CumulativeGasUsed，区块中该交易之前所有交易花费的Gas
7. From，交易发送方地址
8. To，交易接收方地址，如果是创建合约的话，这个字段为null
9. ContractAddress，创建的合约地址，如果是转账交易，这个字段为null
10. Logs，交易执行过程中触发的事件集合
11. LogsBloom，日志的布隆过滤器，用于快速检索日志
12. EffectiveGasPrice，交易实际的GasPrice
13. Type，交易类型。0-传统交易；1-EIP-2930；2-EIP-1559

示例，以太坊返回的Json结构：

```json
{
  "status": 1,
  "transactionHash": "0x9fc7...8692",
  "blockHash": "0x4d5a...c7d1",
  "blockNumber": 1234567,
  "gasUsed": 21000,
  "cumulativeGasUsed": 500000,
  "from": "0xSenderAddress",
  "to": "0xReceiverAddress",
  "contractAddress": null,
  "logs": [
    {
      "address": "0xContractAddress",
      "topics": ["0xTransferEventSig"],
      "data": "0x..."
    }
  ],
  "logsBloom": "0x02000...0000",
  "effectiveGasPrice": "20000000000",
  "type": 2
}
```

# 什么是爬链

通过程序从链上获取公开数据的行为