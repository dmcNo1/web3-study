基础语法部分

# 线程与携程区别？在go中怎么增加处理任务的线程？

## 线程与携程区别？

协程可以理解为虚拟线程，无需涉及到内核态和用户态的切换，只需要在用户态下，由程序调度即可。（这就是Go比Java8快的原因，在Java21之后，Java也支持虚拟线程了）

| 区别 | 线程 | 协程 |
| - | - | - |
| 调度方式 | 由操作系统调度（抢占式） | 由编程语言调度（协作式） |
| 内存开销 | 默认1~2MB | 初始仅有2KB，可以动态扩张 |
| 上下文切换成本 | 频繁在用户态和内核态之间切换，消耗高 | 只会在用户态下调度，消耗低 |
| 创建速度 | 慢，受到操作系统资源的限制 | 极快 |
| 阻塞代价 | 阻塞会导致资源浪费 | 仅仅影响调度，线程仍然可以复用 |

## 在go中怎么增加处理任务的线程？

调整`GOMAXPROCS`控制并发线程数。这个参数的默认值就是CPU的核心数，可以通过手动指定的方式设置，也可以通过修改环境变量的方式设置。

代码：

```go
func main() {
    runtime.GOMAXPROCS(16)
}
```

修改环境变量：

```bash
export GOMAXPROCS=16
```